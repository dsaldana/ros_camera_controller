<launch>

        <arg name="camera_frame" default="usb_cam_frame"/>
        <arg name="camera_node_name" default="usb_cam_node"/>

        <node pkg="camera_controller" type="frame_broadcaster.py" name="fixed_broadcaster">
                <param name="target_frame" type="string" value="$(arg camera_frame)" />
        </node>

        <node pkg="camera1394" type="camera1394_node" name="$(arg camera_node_name)">
                <param name="auto_brightness" type="int" value="2"/>
                <param name="brightness" type="double" value="256.0"/>

                <param name="frame_id" type="string" value="$(arg camera_frame)" />
                <param name="camera_info_url" type="string" value="file://$(find camera_controller)/config/dragonfly.yaml" />
        </node>

<!--
        <node pkg="image_view" type="image_view" name="image_view">
                <remap from="/image" to="/$(arg camera_node_name)/image_raw"/>
        </node>
-->

	<node pkg="camera_controller" type="frame_broadcaster.py" name="fixed_broadcaster0">
		<param name="target_frame" type="string" value="usb_cam_frame0" />
		<param name="x" type="double" value="0.0" />
		<param name="y" type="double" value="0.0" />
		<param name="z" type="double" value="2.71" />
		<param name="qm" type="double" value="0.0" />
		<param name="qx" type="double" value="1.0" />
		<param name="qy" type="double" value="0.0" />
		<param name="qz" type="double" value="0.0" />
	</node>

	<!-- AR Track alvar -->
	<arg name="marker_size" default="4.4" />
	<arg name="max_new_marker_error" default="0.08" />
	<arg name="max_track_error" default="0.2" />
	<arg name="cam_image_topic" default="/usb_cam_node0/image_raw" />
	<arg name="cam_info_topic" default="/usb_cam_node0/camera_info" />
	<arg name="output_frame" default="/usb_cam_frame0" />

	<arg name="bundle_files" default="$(find ar_track_alvar)/bundles/truthTableLeg.xml $(find ar_track_alvar)/bundles/table_8_9_10.xml" />

	<node name="ar_track_alvar" pkg="ar_track_alvar" type="findMarkerBundlesNoKinect" respawn="false" output="screen" args="$(arg marker_size) $(arg max_new_marker_error) $(arg max_track_error) $(arg cam_image_topic) $(arg cam_info_topic) $(arg output_frame) $(arg bundle_files)" />
</launch>
